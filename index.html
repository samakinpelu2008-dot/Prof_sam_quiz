<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ultimate Quiz App</title>
<style>
*{box-sizing:border-box;font-family:"Segoe UI",sans-serif;margin:0;padding:0;}
body{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;justify-content:center;padding:20px;}
.container{width:1000px;max-width:95%;}

/* Title */
h1{color:#fff;text-align:center;margin-bottom:30px;font-size:36px;}

/* Mode Cards */
.mode-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:25px;margin-bottom:40px;}
.mode-card{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:22px;padding:60px 20px;box-shadow:0 20px 40px rgba(0,0,0,0.25);cursor:pointer;transition:0.2s;display:flex;flex-direction:column;align-items:center;text-align:center;}
.mode-card:hover{transform:translateY(-5px);box-shadow:0 25px 50px rgba(0,0,0,0.35);}
.mode-card h2{margin-bottom:10px;font-size:28px;}
.mode-card p{font-size:16px;color:#e0e0ff;}

/* Quiz Card */
.card{display:none;background:#fff;border-radius:22px;padding:30px;box-shadow:0 20px 40px rgba(0,0,0,0.25);}
#homeBtn{background:#667eea;color:#fff;padding:12px 18px;border:none;border-radius:12px;cursor:pointer;margin-bottom:20px;font-size:16px;}
.timer{float:right;font-size:18px;color:#555;font-weight:600;}
.progress{font-size:16px;color:#666;margin-bottom:15px;}
.question{font-size:28px;font-weight:700;margin-bottom:20px;min-height:250px;padding:30px;background:#f2f4ff;border-radius:20px;box-shadow:0 5px 15px rgba(0,0,0,0.1);}
.options{display:grid;gap:22px;margin-bottom:15px;}
.option{padding:25px;border-radius:20px;background:#f2f4ff;cursor:pointer;border:2px solid transparent;transition:.2s;font-size:20px;font-weight:500;}
.option:hover{background:#e3e8ff;transform:translateY(-2px);}
.option.selected{border-color:#667eea;}
.option.correct{background:#d6f5dc;border-color:#2ecc71;}
.option.wrong{background:#ffd6d6;border-color:#e74c3c;opacity:0.85;}

/* Navigation Buttons */
.nav{display:flex;justify-content:space-between;margin-top:25px;}
.nav button{padding:16px 24px;border-radius:12px;border:none;cursor:pointer;background:#667eea;color:#fff;font-size:18px;}
.nav button:disabled{background:#ccc;}

/* Timer Modal */
#timerModal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);justify-content:center;align-items:center;z-index:1000;}
#timerModal .modal-content{background:#fff;border-radius:20px;padding:40px;max-width:450px;text-align:center;}
#timerModal button{padding:14px 28px;border:none;border-radius:12px;margin:8px;background:#667eea;color:#fff;cursor:pointer;font-size:16px;}

/* Result Card */
#resultCard{display:none;background:#fff;border-radius:22px;padding:40px;box-shadow:0 20px 50px rgba(0,0,0,0.3);text-align:left;width:1000px;max-width:95%;max-height:90vh;overflow-y:auto;}
#resultCard h2{margin-bottom:20px;font-size:32px;color:#667eea;text-align:center;}
.result-question{margin-bottom:25px;padding:20px;border-radius:16px;background:#f2f4ff;}
.result-question h3{margin-bottom:10px;font-size:20px;}
.result-question p{font-size:18px;margin-bottom:8px;}
.correct-answer{color:#2ecc71;font-weight:700;}
.wrong-answer{color:#e74c3c;font-weight:700;}
#resultCard button{padding:16px 28px;border-radius:12px;border:none;background:#667eea;color:#fff;cursor:pointer;font-size:18px;display:block;margin:0 auto;margin-top:25px;}
</style>
</head>
<body>
<div class="container">
<h1>üìò Ultimate Quiz App</h1>

<!-- MODE SELECTION -->
<div class="mode-grid" id="modeBox">
<div class="mode-card" onclick="handleModeClick('read')"><h2>üìñ Read Mode</h2><p>Study questions with answers highlighted</p></div>
<div class="mode-card" onclick="handleModeClick('all')"><h2>üìù Solve All</h2><p>Immediate feedback after selection</p></div>
<div class="mode-card" onclick="handleModeClick('random15')"><h2>‚è± Random 15</h2><p>Set timer, 15 questions</p></div>
<div class="mode-card" onclick="handleModeClick('random30')"><h2>‚è± Random 30</h2><p>Set timer, 30 questions</p></div>
</div>

<!-- QUIZ CARD -->
<div class="card" id="quizCard">
<button id="homeBtn" onclick="goHome()">üè† Home</button>
<div style="margin-bottom:15px;">
<span class="timer" id="timer"></span>
</div>
<div class="progress" id="progress"></div>
<div class="question" id="questionText"></div>
<div class="options" id="optionsBox"></div>
<div class="nav">
<button onclick="prevQ()">‚¨Ö Prev</button>
<button onclick="nextQ()">Next ‚û°</button>
<button id="submitBtn" onclick="submitQuiz()">Submit</button>
</div>
</div>

<!-- TIMER MODAL -->
<div id="timerModal" class="flex">
<div class="modal-content">
<h2>Select Timer</h2>
<p>Choose a time for this quiz:</p>
<div>
<button onclick="setTimer(5)">5 min</button>
<button onclick="setTimer(10)">10 min</button>
<button onclick="setTimer(15)">15 min</button>
<button onclick="setTimer(20)">20 min</button>
</div>
<div style="margin-top:15px;">
<button onclick="cancelTimer()">Cancel</button>
<button onclick="startSelectedTimer()">Start</button>
</div>
</div>
</div>

<!-- RESULT CARD -->
<div class="card" id="resultCard">
<h2>üéâ Quiz Completed!</h2>
<div id="resultContent"></div>
<button onclick="goHome()">üè† Return Home</button>
</div>

<script>
// ===== QUESTIONS =====
const QUESTIONS = [];
for(let i=1;i<=300;i++){
QUESTIONS.push({
q:`Sample Question ${i}?`,
options:[`Option A${i}`,`Option B${i}`,`Option C${i}`,`Option D${i}`],
answer: Math.floor(Math.random()*4)
});
}

// ===== QUIZ ENGINE =====
let mode="", quizQuestions=[], index=0, answers={}, timeLeft=0, timerInterval=null, selectedTime=15;
const REDIRECT_URL="https://www.effectivegatecpm.com/prwmz1t9?key=17b80b2cde4a338414105a2c5427f8ce";

function handleModeClick(selectedMode){
const lastRedirect=localStorage.getItem("lastRedirect")||0;
const now=Date.now();
if(now-lastRedirect>12*60*60*1000){
localStorage.setItem("selectedModeAfterRedirect",selectedMode);
localStorage.setItem("lastRedirect",now);
window.location.href=REDIRECT_URL;
return;
}
mode=selectedMode;
if(selectedMode==="random15"||selectedMode==="random30"){
document.getElementById("timerModal").style.display="flex";
} else { startQuiz(selectedMode); }
}

function setTimer(minutes){ selectedTime=minutes; }
function cancelTimer(){ document.getElementById("timerModal").style.display="none"; goHome(); }
function startSelectedTimer(){ document.getElementById("timerModal").style.display="none"; startQuiz(mode); }

window.addEventListener("DOMContentLoaded",()=>{
const resumedMode=localStorage.getItem("selectedModeAfterRedirect");
if(resumedMode){localStorage.removeItem("selectedModeAfterRedirect");handleModeClick(resumedMode);}
});

function startQuiz(selectedMode){
index=0; answers={};
if(mode==="all"||mode==="read"){ quizQuestions=[...QUESTIONS]; }
if(mode==="random15"){ quizQuestions=shuffle([...QUESTIONS]).slice(0,15); }
if(mode==="random30"){ quizQuestions=shuffle([...QUESTIONS]).slice(0,30); }
document.getElementById("modeBox").style.display="none";
document.getElementById("quizCard").style.display="block";
document.getElementById("resultCard").style.display="none";
timeLeft=selectedTime*60;
if(mode==="random15"||mode==="random30"){ startTimer(timeLeft); } else { document.getElementById("timer").innerText=""; }
render();
}

function render(){
const q=quizQuestions[index];
document.getElementById("progress").innerText=`Question ${index+1} of ${quizQuestions.length}`;
document.getElementById("questionText").innerText=q.q;
const box=document.getElementById("optionsBox"); box.innerHTML="";

// Render options
q.options.forEach((opt,i)=>{
const div=document.createElement("div"); div.className="option"; div.innerText=opt;

// Read Mode: highlight correct answer
if(mode==="read" && i===q.answer) div.classList.add("correct");

// Selected option
if(answers[index]===i) div.classList.add("selected");

// Solve All Mode: immediate feedback
if((mode==="all") && answers[index]!==undefined){
if(i===q.answer) div.classList.add("correct");
if(i===answers[index] && answers[index]!==q.answer) div.classList.add("wrong");
}

// Click handler
div.onclick=()=>{
if(mode==="read") return;
if(mode==="all"){ answers[index]=i; render(); return; }
answers[index]=i; render();
};
box.appendChild(div);
});
}

function nextQ(){ if(index<quizQuestions.length-1){ index++; render(); } }
function prevQ(){ if(index>0){ index--; render(); } }
function goHome(){ clearInterval(timerInterval); document.getElementById("quizCard").style.display="none"; document.getElementById("resultCard").style.display="none"; document.getElementById("modeBox").style.display="grid"; }

function startTimer(seconds){ timeLeft=seconds; updateTimer(); clearInterval(timerInterval); timerInterval=setInterval(()=>{ timeLeft--; updateTimer(); if(timeLeft<=0) submitQuiz(); },1000); }
function updateTimer(){ const m=Math.floor(timeLeft/60), s=timeLeft%60; document.getElementById("timer").innerText=`Time: ${m}:${s.toString().padStart(2,"0")}`; }
function shuffle(arr){ return arr.sort(()=>Math.random()-0.5); }

function submitQuiz(){
clearInterval(timerInterval);
const total=quizQuestions.length;
let correct=0;
const resultDiv=document.getElementById("resultContent");
resultDiv.innerHTML="";
quizQuestions.forEach((q,i)=>{
const user=answers[i];
const div=document.createElement("div"); div.className="result-question";
const qTitle=document.createElement("h3"); qTitle.innerText=`Q${i+1}: ${q.q}`; div.appendChild(qTitle);
q.options.forEach((opt,j)=>{
const p=document.createElement("p"); p.innerText=opt;
if(j===q.answer) p.classList.add("correct-answer");
if(user===j && user!==q.answer) p.classList.add("wrong-answer");
div.appendChild(p);
});
if(user===q.answer) correct++;
resultDiv.appendChild(div);
});
const scoreP=document.createElement("p");
scoreP.style.fontSize="24px"; scoreP.style.fontWeight="700"; scoreP.style.marginTop="20px"; scoreP.style.textAlign="center";
scoreP.innerText=`Your Score: ${correct}/${total} (${Math.round(correct/total*100)}%)`;
resultDiv.prepend(scoreP);
document.getElementById("quizCard").style.display="none";
document.getElementById("resultCard").style.display="block";
}
</script>
</body>
</html>
